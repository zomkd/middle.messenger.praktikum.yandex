{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-90f4049b31c75961.js","src/utils/event-bus/event-bus.ts","node_modules/uuid/dist/esm-browser/native.js","node_modules/uuid/dist/esm-browser/rng.js","node_modules/uuid/dist/esm-browser/stringify.js","node_modules/uuid/dist/esm-browser/v4.js","src/utils/block/block.ts","src/components/links/link-mixin.pug","src/router/helpers.ts","src/router/route.ts","src/router/router.ts","src/components/links/link-mixin.ts","src/hocs/withRouter.ts","src/views/404/404.pug","src/views/404/404.ts","src/views/500/500.ts","src/components/buttons/button-mixin.pug","src/components/buttons/button-mixin.ts","src/components/inputs/input-mixin.pug","src/components/inputs/input-mixin.ts","src/utils/validator/validator.ts","src/utils/serializer/serializer.ts","src/utils/httpTrasnsport/http-transport.ts","src/api/BaseAPI.ts","src/api/AuthAPI.ts","src/store/helpers.ts","src/store/store.ts","src/controllers/AuthController.ts","src/views/auth/signIn/signIn.pug","src/views/auth/signIn/signIn.ts","src/views/auth/signUp/signUp.pug","src/views/auth/signUp/signUp.ts","src/modules/chat/components/sidebar/sidebar.pug","src/modules/chat/components/sidebar/user-chats/user-chats.pug","src/hocs/withStore.ts","src/modules/chat/components/sidebar/user-chats/user-chats.ts","src/api/ChatsAPI.ts","src/utils/wsTransport/WSTransport.ts","src/controllers/MessagesController.ts","src/controllers/ChatsController.ts","src/modules/chat/components/sidebar/sidebar.ts","src/modules/chat/components/main-chat/main-chat.pug","src/modules/chat/components/main-chat/main-chat-header/main-chat-header.pug","src/modules/chat/components/main-chat/main-chat-header/main-chat-header.ts","src/components/messages/message.pug","src/components/messages/message.ts","src/modules/chat/components/main-chat/main-chat.ts","src/views/chat/chat.pug","node_modules/@parcel/runtime-js/lib/runtime-fbcb3d125c0cf637.js","src/views/chat/chat.ts","src/components/inputs/profile-inputs/profile-input-mixin.pug","src/components/inputs/profile-inputs/profile-input-mixin.ts","src/api/UserAPI.ts","src/controllers/UserController.ts","src/components/avatar/avatar.pug","src/components/avatar/avatar.ts","src/components/profile-card/profile-card-mixin.pug","src/components/profile-card/profile-card-mixin.ts","src/views/profile/profile-update-info/profile-update-info.pug","src/views/profile/profile-update-info/profile-update-info.ts","src/views/profile/profile-update-password/profile-update-password.pug","src/views/profile/profile-update-password/profile-update-password.ts","src/index.ts"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"1LzKV\\\":\\\"index.08b237b0.js\\\",\\\"7cSvV\\\":\\\"lens-icon.53091bd3.svg\\\",\\\"b3wcV\\\":\\\"index.ae2e211e.css\\\"}\"));","import { IListeners, TypeHandler } from './types';\n\nexport class EventBus {\n  listeners: IListeners;\n\n  constructor() {\n    this.listeners = {};\n  }\n\n  on(event: string, handler: TypeHandler) {\n    if (!this.listeners[event]) {\n      this.listeners[event] = [];\n    }\n\n    this.listeners[event].push(handler);\n  }\n\n  off(event: string, handler: TypeHandler) {\n    if (!this.listeners[event]) {\n      throw new Event(`Нет события: ${event}`);\n    }\n    this.listeners[event] = this.listeners[event].filter(\n      (listener) => listener !== handler,\n    );\n  }\n\n  emit(event: string, ...args: any[]) {\n    if (!this.listeners[event]) {\n      return;\n    }\n\n    this.listeners[event].forEach((listener) => listener(...args));\n  }\n}\n","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default {\n  randomUUID\n};","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nlet getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\n\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  return (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase();\n}\n\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return unsafeStringify(rnds);\n}\n\nexport default v4;","import { EventBus } from '../event-bus/event-bus';\nimport { v4 as uuidv4 } from 'uuid';\n\nexport class Block<P extends Record<string, any> = any> {\n  static EVENTS = {\n    INIT: 'init',\n    FLOW_CDM: 'flow:component-did-mount',\n    FLOW_CDU: 'flow:component-did-update',\n    FLOW_RENDER: 'flow:render',\n  } as const;\n\n  public id = uuidv4();\n  protected props: P;\n  public children: Record<string, Block | Block[]>;\n  private eventBus: () => EventBus;\n  private _element: HTMLElement | null = null;\n\n  constructor(propsWithChildren: P) {\n    const eventBus = new EventBus();\n\n    const { props, children } = this._getChildrenAndProps(propsWithChildren);\n\n    this.children = children;\n    this.props = this._makePropsProxy(props);\n\n    this.eventBus = () => eventBus;\n\n    this._registerEvents(eventBus);\n\n    eventBus.emit(Block.EVENTS.INIT);\n  }\n\n  _getChildrenAndProps(childrenAndProps: P): {\n    props: P;\n    children: Record<string, Block | Block[]>;\n  } {\n    const props: Record<string, unknown> = {};\n    const children: Record<string, Block | Block[]> = {};\n\n    Object.entries(childrenAndProps).forEach(([key, value]) => {\n      if (\n        Array.isArray(value) &&\n        value.length > 0 &&\n        value.every((v) => v instanceof Block)\n      ) {\n        children[key as string] = value;\n      } else if (value instanceof Block) {\n        children[key as string] = value;\n      } else {\n        props[key] = value;\n      }\n    });\n\n    return { props: props as P, children };\n  }\n\n  _addEvents() {\n    const { events = {} } = this.props as P & {\n      events: Record<string, () => void>;\n    };\n\n    Object.keys(events).forEach((eventName) => {\n      this._element?.addEventListener(eventName, events[eventName]);\n    });\n  }\n\n  _registerEvents(eventBus: EventBus) {\n    eventBus.on(Block.EVENTS.INIT, this._init.bind(this));\n    eventBus.on(Block.EVENTS.FLOW_CDM, this._componentDidMount.bind(this));\n    eventBus.on(Block.EVENTS.FLOW_CDU, this._componentDidUpdate.bind(this));\n    eventBus.on(Block.EVENTS.FLOW_RENDER, this._render.bind(this));\n  }\n\n  private _init() {\n    this.init();\n\n    this.eventBus().emit(Block.EVENTS.FLOW_RENDER);\n  }\n\n  protected init() {}\n\n  _componentDidMount() {\n    this.componentDidMount();\n  }\n\n  componentDidMount() {}\n\n  public dispatchComponentDidMount() {\n    this.eventBus().emit(Block.EVENTS.FLOW_CDM);\n\n    Object.values(this.children).forEach((child) => {\n      if (Array.isArray(child)) {\n        child.forEach((ch) => ch.dispatchComponentDidMount());\n      } else {\n        child.dispatchComponentDidMount();\n      }\n    });\n  }\n\n  private _componentDidUpdate(oldProps: P, newProps: P) {\n    if (this.componentDidUpdate(oldProps, newProps)) {\n      this.eventBus().emit(Block.EVENTS.FLOW_RENDER);\n    }\n  }\n\n  protected componentDidUpdate(oldProps: P, newProps: P) {\n    return true;\n  }\n\n  setProps = (nextProps: Partial<P>) => {\n    if (!nextProps) {\n      return;\n    }\n\n    Object.assign(this.props, nextProps);\n  };\n\n  get element() {\n    return this._element;\n  }\n\n  private _render() {\n    const fragment = this.render();\n\n    const newElement = fragment.firstElementChild as HTMLElement;\n\n    if (this._element && newElement) {\n      this._element.replaceWith(newElement);\n    }\n\n    this._element = newElement;\n\n    this._addEvents();\n  }\n\n  protected compile(template: (context: any) => string, context: any) {\n    const contextAndStubs = { ...context };\n\n    Object.entries(this.children).forEach(([name, component]) => {\n      if (Array.isArray(component)) {\n        contextAndStubs[name] = component.map(\n          (child) => `<div data-id=\"${child.id}\"></div>`,\n        );\n      } else {\n        contextAndStubs[name] = `<div data-id=\"${component.id}\"></div>`;\n      }\n    });\n\n    const html = template(contextAndStubs);\n\n    const temp = document.createElement('template');\n\n    temp.innerHTML = html;\n\n    const replaceStub = (component: Block) => {\n      const stub = temp.content.querySelector(`[data-id=\"${component.id}\"]`);\n\n      if (!stub) {\n        return;\n      }\n\n      component.getContent()?.append(...Array.from(stub.childNodes));\n\n      stub.replaceWith(component.getContent()!);\n    };\n\n    Object.entries(this.children).forEach(([_, component]) => {\n      if (Array.isArray(component)) {\n        component.forEach(replaceStub);\n      } else {\n        replaceStub(component);\n      }\n    });\n\n    return temp.content;\n  }\n\n  protected render(): DocumentFragment {\n    return new DocumentFragment();\n  }\n\n  getContent() {\n    return this.element;\n  }\n\n  _makePropsProxy(props: P) {\n    // Ещё один способ передачи this, но он больше не применяется с приходом ES6+\n    const self = this;\n\n    return new Proxy(props, {\n      get(target, prop: string) {\n        const value = target[prop];\n        return typeof value === 'function' ? value.bind(target) : value;\n      },\n      set(target, prop: string, value) {\n        const oldTarget = { ...target };\n\n        target[prop as keyof P] = value;\n\n        // Запускаем обновление компоненты\n        // Плохой cloneDeep, в следующей итерации нужно заставлять добавлять cloneDeep им самим\n        self.eventBus().emit(Block.EVENTS.FLOW_CDU, oldTarget, target);\n        return true;\n      },\n      deleteProperty() {\n        throw new Error('Нет доступа');\n      },\n    });\n  }\n}\n","div(class=`link ${extraClass || ''}`)\n    a(href=href )= content\n","export function isEqual(newPath: string, oldPath: string): boolean {\n  return newPath === oldPath;\n}\n","import { Block } from 'src/utils/block/block';\nimport { isEqual } from './helpers';\n\nfunction render(query: string, block: Block) {\n  const root = document.querySelector(query);\n\n  if (root === null) {\n    throw new Error(`root not found by selector \"${query}\"`);\n  }\n\n  root.innerHTML = '';\n\n  root.append(block.getContent()!);\n\n  return root;\n}\n\nexport class Route {\n  private _pathname: string;\n  private _blockClass: typeof Block;\n  private _block: InstanceType<typeof Block> | null;\n  private _props: string;\n\n  constructor(pathname: string, view: typeof Block, props: string) {\n    this._pathname = pathname;\n    this._blockClass = view;\n    this._block = null;\n    this._props = props;\n  }\n\n  navigate(pathname: string) {\n    if (this.match(pathname)) {\n      this.render();\n    }\n  }\n\n  leave() {\n    this._block = null;\n  }\n\n  match(pathname: string) {\n    return isEqual(pathname, this._pathname);\n  }\n\n  render() {\n    if (!this._block) {\n      this._block = new this._blockClass('div', {});\n\n      render(this._props, this._block!);\n      return;\n    }\n  }\n}\n","import { Route } from './route';\nimport { Block } from 'src/utils/block/block';\nimport { Page404 } from '../views/404/404';\n\nclass Router {\n  private static __instance: Router;\n  private _routes: Route[] = [];\n  private _currentRoute: Route | null = null;\n  private _history = window.history;\n\n  constructor(private readonly rootQuery: string) {\n    if (Router.__instance) {\n      return Router.__instance;\n    }\n\n    this._routes = [];\n\n    Router.__instance = this;\n  }\n\n  public use(pathname: string, block: typeof Block) {\n    const route = new Route(pathname, block, this.rootQuery);\n    this._routes.push(route);\n\n    return this;\n  }\n  public start() {\n    window.onpopstate = (event: PopStateEvent) => {\n      const target = event.currentTarget as Window;\n\n      this._onRoute(target.location.pathname);\n    };\n\n    this._onRoute(window.location.pathname);\n  }\n  private _onRoute(pathname: string) {\n    const route = this.getRoute(pathname);\n\n    if (!route) {\n      const errorPage = new Route('/error-404', Page404, this.rootQuery);\n      console.log(errorPage);\n      errorPage.render();\n      return;\n    }\n\n    if (this._currentRoute && this._currentRoute !== route) {\n      this._currentRoute.leave();\n    }\n\n    this._currentRoute = route;\n\n    route.render();\n  }\n\n  public go(pathname: string) {\n    this._history.pushState({}, '', pathname);\n\n    this._onRoute(pathname);\n  }\n\n  public back() {\n    this._history.back();\n  }\n\n  public forward() {\n    this._history.forward();\n  }\n\n  private getRoute(pathname: string) {\n    return this._routes.find((route) => route.match(pathname));\n  }\n}\n\nexport default new Router('#app');\n","import { Block } from '../../utils/block/block';\nimport template from './link-mixin.pug';\nimport { PropsWithRouter, withRouter } from '../../hocs/withRouter';\nimport './link-mixin.scss';\n\ninterface LinkProps extends PropsWithRouter {\n  extraClass?: string;\n  content?: string;\n  to?: string;\n  imgSrc?: string;\n  events?: {\n    click: () => void;\n  };\n}\n\nexport class BaseLink extends Block<LinkProps> {\n  constructor(props: LinkProps) {\n    super({\n      ...props,\n      events: {\n        click: () => this.navigate(),\n      },\n    });\n  }\n\n  navigate() {\n    this.props.router.go(this.props.to!);\n  }\n\n  render() {\n    return this.compile(template, this.props);\n  }\n}\n\nexport const Link = withRouter(BaseLink);\n","import { Block } from '../utils/block/block';\nimport Router from '../router/router';\n\nexport function withRouter(Component: typeof Block) {\n  return class WithRouter extends Component {\n    constructor(props: typeof Component & PropsWithRouter) {\n      super({ ...props, router: Router });\n    }\n  };\n}\n\nexport interface PropsWithRouter {\n  router: typeof Router;\n}\n",".error-message-wrapper\n    .error-message\n            .error-message__code=404\n            .error-message__text='Страница не найдена'\n            .error-message__link\n                | !{link}\n\n","import { Block } from '../../utils/block/block';\nimport { BaseLink } from '../../components/links/link-mixin';\nimport template from './404.pug';\nimport './404.scss';\n\ninterface ErrorProps {\n  errorMessageCode: string;\n  errorMessageText: string;\n  href: string;\n  message: string;\n}\n\nexport class Page404 extends Block {\n  constructor(props: ErrorProps) {\n    super(props);\n  }\n  init() {\n    this.children.link = new BaseLink({\n      content: 'Назад к чатам',\n      href: '/',\n    });\n  }\n  render() {\n    return this.compile(template, this.props);\n  }\n}\n","import { Block } from '../../utils/block/block';\nimport { BaseLink } from '../../components/links/link-mixin';\nimport template from '../404/404.pug';\nimport '../404/404.scss';\n\ninterface ErrorProps {\n  errorMessageCode: string;\n  errorMessageText: string;\n  href: string;\n  message: string;\n}\n\nexport class Page500 extends Block {\n  constructor(props: ErrorProps) {\n    super('main', props);\n  }\n  init() {\n    this.children.link = new BaseLink({\n      content: 'Назад к чатам',\n      href: '/',\n    });\n  }\n  render() {\n    return this.compile(template, this.props);\n  }\n}\n","div.form-button\n    button(type=type || 'submit' class=`form-button ${btnClass}`)= content\n","import { Block } from '../../utils/block/block';\nimport template from './button-mixin.pug';\nimport './button-mixin.scss';\n\ninterface ButtonProps {\n  type?: string;\n  content?: string;\n  btnClass?: string;\n  events?: {\n    click: () => void;\n  };\n}\n\nexport class Button extends Block<ButtonProps> {\n  constructor(props: ButtonProps) {\n    super(props);\n  }\n\n  render() {\n    return this.compile(template, this.props);\n  }\n}\n","div.input\n    if label\n        label(class=`input__label ${name}`)=label || ''\n    input(type=`${type}` name=`${name}` class=`input__field-${name}` placeholder=`${placeholder || ''}` required autofocus)\n    label(class=`error error-${name}`)=error || ''\n","import { Block } from '../../utils/block/block';\nimport template from './input-mixin.pug';\nimport './input-mixin.scss';\n\ninterface InputProps {\n  name: string;\n  type: string;\n  label?: string;\n  placeholder: string;\n  error?: string;\n  events?: {\n    focusin: (event: Event) => void;\n    focusout: (event: Event) => void;\n  };\n}\n\nexport class Input extends Block<InputProps> {\n  constructor(props: InputProps) {\n    super(props);\n  }\n  public setValue(value: string) {\n    return ((this.element as HTMLInputElement).childNodes[0]!.value = value);\n  }\n\n  public getName() {\n    return (this.element as HTMLInputElement).name;\n  }\n\n  public getValue() {\n    return (this.element as HTMLInputElement).childNodes[0]!.value;\n  }\n  render() {\n    return this.compile(template, this.props);\n  }\n}\n","export enum FieldName {\n  Login = 'login',\n  Password = 'password',\n  Email = 'email',\n  RepeatPassword = 'repeatPassword',\n  FirstName = 'first_name',\n  SecondName = 'second_name',\n  Phone = 'phone',\n  OldPassword = 'oldPassword',\n  NewPassword = 'newPassword',\n  Message = 'message',\n  DisplayName = 'display_name',\n}\n\nexport function validate(element: HTMLInputElement) {\n  const { name, value } = element;\n\n  if (name === FieldName.Login) {\n    const isTextLoginValid = /^([0-9]*[a-zA-Z\\-_][0-9]*)+$/.test(value);\n    const isLengthLoginValid = value.length >= 3 && value.length < 20;\n    if (!isLengthLoginValid || !isTextLoginValid) {\n      return true;\n    }\n    return null;\n  }\n\n  if (\n    name === FieldName.Password ||\n    name === FieldName.RepeatPassword ||\n    name === FieldName.OldPassword ||\n    name === FieldName.NewPassword\n  ) {\n    const isValidText = /^(.*([A-Z]+.*[0-9]+|[0-9]+.*[A-Z]+).*)+$/.test(value);\n    const isValidLength = value.length >= 8 && value.length < 40;\n\n    if (!isValidText || !isValidLength) {\n      return true;\n    }\n    return null;\n  }\n\n  if (name === FieldName.FirstName || name === FieldName.SecondName) {\n    const isValidValue = /^[A-ZА-Я][a-zA-Zа-яА-Я-]*$/.test(value);\n\n    if (!isValidValue) {\n      return true;\n    }\n\n    return null;\n  }\n\n  if (name === FieldName.Email) {\n    const isValidValue = /^([\\w-.]+@[a-zA-Z]+.[a-z]+)$/.test(value);\n\n    if (!isValidValue) {\n      return true;\n    }\n\n    return null;\n  }\n\n  if (name === FieldName.Phone) {\n    const isValidValue = /^\\+*[\\d]{10,15}$/.test(value);\n\n    if (!isValidValue) {\n      return true;\n    }\n\n    return null;\n  }\n\n  if (name === FieldName.Message) {\n    const isValidLength = value.length > 0;\n\n    if (!isValidLength) {\n      return true;\n    }\n\n    return null;\n  }\n}\n\nexport function validateBlock(event: Event): void {\n  const element = event.target as HTMLInputElement;\n  if (validate(element)) {\n    element.classList.add('invalid');\n    document.getElementsByClassName(`error-${element.name}`)[0].style.display =\n      'block';\n  } else {\n    element.classList.remove('invalid');\n    document.getElementsByClassName(`error-${element.name}`)[0].style.display =\n      'none';\n  }\n}\n","import { validate } from '../validator/validator';\n\nexport function serializer(event: Event, fields: string[]): any {\n  event.preventDefault();\n  const formData: { [index: string]: any } = {};\n  let isFormValid = true;\n  fields.map((field) => {\n    const el = document.getElementsByName(field)[0];\n    if (validate(el as HTMLInputElement)) {\n      isFormValid = false;\n      // el.classList.add(this.props.styles['input-error']);\n    } else {\n      const name = el.getAttribute('name');\n      const { value } = el as HTMLInputElement;\n      if (name) {\n        formData[name] = value;\n      }\n    }\n  });\n  if (isFormValid) {\n    return formData;\n  }\n  return;\n}\n","import { stringToQuery } from './helpers';\n\nexport enum Method {\n  GET = 'GET',\n  POST = 'POST',\n  PUT = 'PUT',\n  PATCH = 'PATCH',\n  DELETE = 'DELETE',\n}\n\ntype Options = {\n  method: Method;\n  data?: any;\n};\ntype HTTPMethod = (\n  path?: string,\n  data?: unknown,\n  options?: Options,\n) => Promise<Response>;\n\nexport default class HttpTransport {\n  static API_URL = 'https://ya-praktikum.tech/api/v2';\n  protected endpoint: string;\n\n  constructor(endpoint: string) {\n    this.endpoint = `${HttpTransport.API_URL}${endpoint}`;\n  }\n\n  public get<Response>(path = '/'): Promise<Response> {\n    return this.request<Response>(this.endpoint + path);\n  }\n\n  public post: HTTPMethod = (path: string | undefined, data?: unknown) => {\n    return this.request<Response>(this.endpoint + path, {\n      method: Method.POST,\n      data,\n    });\n  };\n\n  public put: HTTPMethod = (path: string, data: unknown) => {\n    return this.request<Response>(this.endpoint + path, {\n      method: Method.PUT,\n      data,\n    });\n  };\n\n  public patch: HTTPMethod = (path: string, data: unknown) => {\n    return this.request<Response>(this.endpoint + path, {\n      method: Method.PATCH,\n      data,\n    });\n  };\n\n  public delete: HTTPMethod = (path: string) => {\n    return this.request<Response>(this.endpoint + path, {\n      method: Method.DELETE,\n    });\n  };\n  private request<Response>(\n    url: string,\n    optinos: Options = { method: Method.GET },\n  ): Promise<Response> {\n    const { method, data } = optinos;\n\n    return new Promise((resolve, reject) => {\n      const xhr = new XMLHttpRequest();\n      xhr.open(method, url);\n\n      xhr.onload = () => {\n        resolve(xhr.response);\n      };\n\n      xhr.onabort = () => reject({ reason: 'abort' });\n      xhr.onerror = () => reject({ reason: 'network error' });\n      xhr.ontimeout = () => reject({ reason: 'timeout' });\n\n      if (!(data instanceof FormData)) {\n        xhr.setRequestHeader('Content-Type', 'application/json');\n      }\n      xhr.withCredentials = true;\n      xhr.responseType = 'json';\n\n      if (method === Method.GET || !data) {\n        xhr.send();\n      } else {\n        xhr.send(data instanceof FormData ? data : JSON.stringify(data));\n      }\n    });\n  }\n}\n","import HttpTransport from '../utils/httpTrasnsport/http-transport';\n\nexport default abstract class BaseAPI {\n  protected http: HttpTransport;\n\n  protected constructor(endpoint: string) {\n    this.http = new HttpTransport(endpoint);\n  }\n\n  public create?(data: unknown): Promise<unknown>;\n\n  public read?(identifier?: string): Promise<unknown>;\n\n  public update?(identifier: string, data: unknown): Promise<unknown>;\n\n  public delete?(identifier: string): Promise<unknown>;\n}\n","import BaseAPI from './BaseAPI';\nexport interface SigninData {\n  login: string;\n  password: string;\n}\n\nexport interface SignupData {\n  first_name: string;\n  second_name: string;\n  login: string;\n  email: string;\n  password: string;\n  phone: string;\n}\n\nexport interface User {\n  id: number;\n  first_name: string;\n  second_name: string;\n  login: string;\n  email: string;\n  password: string;\n  phone: string;\n  avatar: string;\n}\nexport class AuthAPI extends BaseAPI {\n  constructor() {\n    super('/auth');\n  }\n\n  signin(data: SigninData) {\n    return this.http.post('/signin', data);\n  }\n\n  signup(data: SignupData) {\n    return this.http.post('/signup', data);\n  }\n\n  read(): Promise<User> {\n    return this.http.get('/user');\n  }\n\n  logout() {\n    return this.http.post('/logout');\n  }\n}\n\nexport default new AuthAPI();\n","export type Indexed<T = any> = {\n  [key in string]: T;\n};\n\nexport function merge(lhs: Indexed, rhs: Indexed): Indexed {\n  for (let p in rhs) {\n    if (!rhs.hasOwnProperty(p)) {\n      continue;\n    }\n\n    try {\n      if (rhs[p].constructor === Object) {\n        rhs[p] = merge(lhs[p] as Indexed, rhs[p] as Indexed);\n      } else {\n        lhs[p] = rhs[p];\n      }\n    } catch (e) {\n      lhs[p] = rhs[p];\n    }\n  }\n\n  return lhs;\n}\n\nexport function set(\n  object: Indexed | unknown,\n  path: string,\n  value: unknown,\n): Indexed | unknown {\n  if (typeof object !== 'object' || object === null) {\n    return object;\n  }\n\n  if (typeof path !== 'string') {\n    throw new Error('path must be string');\n  }\n\n  const result = path.split('.').reduceRight<Indexed>(\n    (acc, key) => ({\n      [key]: acc,\n    }),\n    value as any,\n  );\n\n  return merge(object as Indexed, result);\n}\n","import { set } from './helpers';\nimport { EventBus } from '../utils/event-bus/event-bus';\n\nexport enum StoreEvents {\n  Updated = 'updated',\n}\n\nexport class Store extends EventBus {\n  private state: any = {};\n\n  public set(keypath: string, data: unknown) {\n    set(this.state, keypath, data);\n    this.emit(StoreEvents.Updated, this.getState());\n  }\n\n  public getState() {\n    return this.state;\n  }\n}\n\nconst store = new Store();\nexport default store;\n","import API, { AuthAPI, SigninData, SignupData } from '../api/AuthAPI';\nimport store from '../store/store';\nimport router from '../router/router';\n\nexport class AuthController {\n  private readonly api: AuthAPI;\n\n  constructor() {\n    this.api = API;\n  }\n\n  async signin(data: SigninData) {\n    try {\n      store.set('user.error', null);\n      await this.api.signin(data);\n      await this.fetchUser();\n      router.go('/messanger');\n    } catch (e: any) {\n      store.set('user.error', e);\n    }\n  }\n\n  async signup(data: SignupData) {\n    try {\n      store.set('user.error', null);\n      await this.api.signup(data);\n\n      await this.fetchUser();\n\n      router.go('/messanger');\n    } catch (e: any) {\n      store.set('user.error', e);\n    }\n  }\n\n  async fetchUser() {\n    try {\n      const user = await this.api.read();\n      if (!user.reason) store.set('user.data', user);\n    } catch (e: any) {\n      store.set('user.error', e);\n    }\n  }\n\n  async logout() {\n    try {\n      await this.api.logout();\n\n      router.go('/');\n    } catch (e: any) {\n      store.set('user.error', e);\n    }\n  }\n}\n\nexport default new AuthController();\n","div.auth-layout\n    main.sign-in\n        form(class='sign-in__block' action='../../chat/chat.html')\n            .sign-in__block-title\n                span(class=\"sign-in__block-title-text\")=title\n            .sign-in__block-login-input\n                | !{login}\n                | !{password}\n            .sign-in__block-auth-btn\n                | !{button}\n            .sign-in__block-sign-up\n                | !{link}\n","import { Button } from '../../../components/buttons/button-mixin';\nimport { Block } from '../../../utils/block/block';\nimport { Input } from '../../../components/inputs/input-mixin';\n// import { BaseLink } from '../../../components/links/link-mixin';\nimport { Link } from '../../../components/links/link-mixin';\nimport { validateBlock } from '../../../utils/validator/validator';\nimport { serializer } from '../../../utils/serializer/serializer';\nimport AuthController from '../../../controllers/AuthController';\nimport template from './signIn.pug';\nimport './signIn.scss';\n\ninterface SignInProps {\n  title: string;\n}\n\nexport class SignIn extends Block {\n  constructor(props: SignInProps) {\n    super(props);\n  }\n\n  init() {\n    this.children.login = new Input({\n      name: 'login',\n      type: 'text',\n      label: 'Логин',\n      placeholder: '',\n      error: 'Логин должен содержать больше 3х символов',\n      events: {\n        focusout: (event: Event) => validateBlock(event),\n        focusin: (event: Event) => validateBlock(event),\n      },\n    });\n\n    this.children.password = new Input({\n      name: 'password',\n      type: 'password',\n      label: 'Пароль',\n      placeholder: '',\n      error: 'Недопустимые символы',\n      events: {\n        focusout: (event: Event) => validateBlock(event),\n        focusin: (event: Event) => validateBlock(event),\n      },\n    });\n\n    this.children.button = new Button({\n      type: 'submit',\n      content: 'Авторизоваться',\n      btnClass: 'sign-in-btn',\n      events: {\n        click: (e) => this.onSubmit(e),\n      },\n    });\n\n    this.children.link = new Link({\n      content: 'Нет аккаунта?',\n      to: '/signup',\n    });\n  }\n  onSubmit(e) {\n    const fields = ['login', 'password'];\n    let dataForm = {};\n    dataForm = serializer(e, fields);\n    AuthController.signin(dataForm);\n  }\n\n  render() {\n    return this.compile(template, this.props);\n  }\n}\n","div.auth-layout\n    main.signUp\n        form(class='signUp__block' action='../../chat/chat.html')\n            .signUp__block-title\n                span(class=\"sign-in__title\")=title\n            .signUp__block-user-info-input\n                | !{email}\n                | !{login}\n                | !{firstName}\n                | !{secondName}\n                | !{phone}\n                | !{password}\n                | !{repeatPassword}\n            .signUp__block-auth-btn\n                | !{button}\n\n","import { Block } from '../../../utils/block/block';\nimport { Button } from '../../../components/buttons/button-mixin';\nimport { Input } from '../../../components/inputs/input-mixin';\nimport { Link } from '../../../components/links/link-mixin';\nimport { validateBlock } from '../../../utils/validator/validator';\nimport { serializer } from '../../../utils/serializer/serializer';\nimport AuthController from '../../../controllers/AuthController';\nimport template from './signUp.pug';\nimport './signUp.scss';\n\ninterface SignUpProps {\n  title: string;\n}\n\nexport class SignUp extends Block {\n  constructor(props: SignUpProps) {\n    super(props);\n  }\n\n  init() {\n    this.children.email = new Input({\n      name: 'email',\n      type: 'text',\n      label: 'Почта',\n      placeholder: '',\n      error: 'Неверный формат',\n      events: {\n        focusout: (event: Event) => validateBlock(event),\n        focusin: (event: Event) => validateBlock(event),\n      },\n    });\n\n    this.children.login = new Input({\n      name: 'login',\n      type: 'text',\n      label: 'Логин',\n      placeholder: '',\n      error: 'Недостаточное количество символов или неверный формат',\n      events: {\n        focusout: (event: Event) => validateBlock(event),\n        focusin: (event: Event) => validateBlock(event),\n      },\n    });\n\n    this.children.firstName = new Input({\n      name: 'first_name',\n      type: 'text',\n      label: 'Имя',\n      placeholder: '',\n      error: 'Недостаточное количество символов или неверный формат',\n      events: {\n        focusout: (event: Event) => validateBlock(event),\n        focusin: (event: Event) => validateBlock(event),\n      },\n    });\n\n    this.children.secondName = new Input({\n      name: 'second_name',\n      type: 'text',\n      label: 'Фамилия',\n      placeholder: '',\n      error: 'Недостаточное количество символов или неверный формат',\n      events: {\n        focusout: (event: Event) => validateBlock(event),\n        focusin: (event: Event) => validateBlock(event),\n      },\n    });\n\n    this.children.phone = new Input({\n      name: 'phone',\n      type: 'text',\n      label: 'Телефон',\n      placeholder: '',\n      error: 'Недостаточное количество символов или неверный формат',\n      events: {\n        focusout: (event: Event) => validateBlock(event),\n        focusin: (event: Event) => validateBlock(event),\n      },\n    });\n\n    this.children.password = new Input({\n      name: 'password',\n      type: 'password',\n      label: 'Пароль',\n      placeholder: '',\n      error: 'Пароль должен быть как минимум из 8 символов',\n      events: {\n        focusout: (event: Event) => validateBlock(event),\n        focusin: (event: Event) => validateBlock(event),\n      },\n    });\n\n    this.children.repeatPassword = new Input({\n      name: 'repeatPassword',\n      type: 'password',\n      label: 'Пароль (ещё раз)',\n      placeholder: '',\n      error: 'Пароль не совпадают',\n      events: {\n        focusout: (event: Event) => validateBlock(event),\n        focusin: (event: Event) => validateBlock(event),\n      },\n    });\n\n    this.children.button = new Button({\n      type: 'submit',\n      content: 'Зарегистрироваться',\n      btnClass: 'sign-up',\n      events: {\n        click: (e) => this.onSubmit(e),\n      },\n    });\n\n    this.children.link = new Link({\n      content: 'Войти',\n      to: '/messanger',\n    });\n  }\n\n  onSubmit(e) {\n    e.preventDefault();\n    const fields = [\n      'email',\n      'login',\n      'first_name',\n      'second_name',\n      'phone',\n      'password',\n      'repeatPassword',\n    ];\n    serializer(e, fields);\n    let dataForm = {};\n    dataForm = serializer(e, fields);\n    AuthController.signup(dataForm);\n  }\n\n  render() {\n    return this.compile(template, this.props);\n  }\n}\n","main.sidebar\n    header.sidebar__header\n        div.sidebar__header-profile\n            div.sidebar__header-profile-block\n                div(class='sidebar__header-profile-block-text')\n                | !{profileLink}\n                i.sidebar__header-profile-block-arrow\n        div.sidebar__header-search\n            div.sidebar__header-search-block\n                div.sidebar__header-search-block-icon \n                    .search-icon \n                        img(src=img alt='icon')\n                    | !{searchLink}\n                div.sidebar__header-search-block-text=search\n    .create-chat\n        | !{addChat}\n    .add-user-to-chat\n        | !{addLink}\n        | !{addUserToChat}\n    section.user-chats\n        | !{chats}\n","\n.user-chats__block\n    .user-chats__container\n        .user-chats__img=id\n        .user-chats__content\n            if last_message\n                .user-chats__content-name=last_message.user.first_name\n                .user-chats__content-message=last_message.content\n            else\n                .user-chats__content-name=''\n                .user-chats__content-message=''\n            \n","import { isEqual } from '../router/helpers';\nimport store, { StoreEvents } from '../store/store';\nimport { Block } from '../utils/block/block';\nimport { User } from '../api/AuthAPI';\nimport { ChatInfo } from '../api/ChatsAPI';\nimport { Message } from '../controllers/MessagesController';\n\ninterface State {\n  user?: User;\n  chats?: ChatInfo[];\n  messages?: Record<number, Message[]>;\n  selectedChat?: number;\n}\nexport function withStore(mapStateToProps: (state: State) => any) {\n  return function wrap(Component: typeof Block) {\n    let previousState: any = null;\n\n    return class WithStore extends Component {\n      constructor(props: any) {\n        previousState = mapStateToProps(store.getState());\n\n        super({ ...props, ...previousState });\n\n        store.on(StoreEvents.Updated, () => {\n          const stateProps = mapStateToProps(store.getState());\n\n          if (isEqual(previousState, stateProps)) {\n            return;\n          }\n\n          this.setProps({ ...stateProps });\n        });\n      }\n    };\n  };\n}\n","import { Block } from '../../../../../utils/block/block';\nimport template from './user-chats.pug';\nimport './user-chats.scss';\nimport { withStore } from '../../../../../hocs/withStore';\nimport { ChatInfo } from '../../../../../api/ChatsAPI';\n\ninterface UserChatsProps {\n  id: number;\n  title: string;\n  unread_count: number;\n  selectedChat: ChatInfo;\n  events: {\n    click: () => void;\n  };\n}\n\nexport class UserChatsBase extends Block {\n  constructor(props: UserChatsProps) {\n    super(props);\n  }\n\n  render() {\n    return this.compile(template, this.props);\n  }\n}\n\nexport const withSelectedChat = withStore((state) => ({\n  selectedChat: (state.chats || []).find(({ id }) => id === state.selectedChat),\n}));\n\nexport const UserChats = withSelectedChat(UserChatsBase);\n","import BaseAPI from './BaseAPI';\nimport { User } from './AuthAPI';\n\nexport interface ChatInfo {\n  id: number;\n  title: string;\n  avatar: string;\n  unread_count: number;\n  last_message: {\n    user: User;\n    time: string;\n    content: string;\n  };\n}\n\nexport class ChatsAPI extends BaseAPI {\n  constructor() {\n    super('/chats');\n  }\n\n  create(title: string) {\n    return this.http.post('/', { title });\n  }\n\n  delete(id: number): Promise<unknown> {\n    return this.http.delete('/', { chatId: id });\n  }\n\n  read(): Promise<ChatInfo[]> {\n    return this.http.get('/');\n  }\n\n  getUsers(id: number): Promise<Array<User & { role: string }>> {\n    return this.http.get(`/${id}/users`);\n  }\n\n  addUsers(id: number, users: number[]): Promise<unknown> {\n    return this.http.put('/users', { users, chatId: id });\n  }\n\n  async getToken(id: number): Promise<string> {\n    const response = await this.http.post<{ token: string }>(`/token/${id}`);\n\n    return response.token;\n  }\n}\n\nexport default new ChatsAPI();\n","import { EventBus } from '../event-bus/event-bus';\n\nexport enum WSTransportEvents {\n  Connected = 'connected',\n  Error = 'error',\n  Message = 'message',\n  Close = 'close',\n}\n\nexport default class WSTransport extends EventBus {\n  private socket: WebSocket | null = null;\n  private pingInterval: number = 0;\n\n  constructor(private url: string) {\n    super();\n  }\n\n  public send(data: unknown) {\n    if (!this.socket) {\n      throw new Error('Socket is not connected');\n    }\n    this.socket.send(JSON.stringify(data));\n  }\n\n  public connect(): Promise<void> {\n    this.socket = new WebSocket(this.url);\n\n    this.subscribe(this.socket);\n\n    this.setupPing();\n\n    return new Promise((resolve) => {\n      this.on(WSTransportEvents.Connected, () => {\n        resolve();\n      });\n    });\n  }\n\n  public close() {\n    this.socket?.close();\n  }\n\n  private setupPing() {\n    this.pingInterval = setInterval(() => {\n      this.send({ type: 'ping' });\n    }, 5000);\n\n    this.on(WSTransportEvents.Close, () => {\n      clearInterval(this.pingInterval);\n\n      this.pingInterval = 0;\n    });\n  }\n\n  private subscribe(socket: WebSocket) {\n    socket.addEventListener('open', () => {\n      this.emit(WSTransportEvents.Connected);\n    });\n    socket.addEventListener('close', () => {\n      this.emit(WSTransportEvents.Close);\n    });\n\n    socket.addEventListener('error', (e) => {\n      this.emit(WSTransportEvents.Error, e);\n    });\n\n    socket.addEventListener('message', (message) => {\n      const data = JSON.parse(message.data);\n\n      if (data.type && data.type === 'pong') {\n        return;\n      }\n\n      this.emit(WSTransportEvents.Message, data);\n    });\n  }\n}\n","import WSTransport, {\n  WSTransportEvents,\n} from '../utils/wsTransport/WSTransport';\nimport store from '../store/store';\n\nexport interface Message {\n  chat_id: number;\n  time: string;\n  type: string;\n  user_id: number;\n  content: string;\n}\n\nclass MessagesController {\n  private sockets: Map<number, WSTransport> = new Map();\n\n  async connect(id: number, token: string) {\n    if (this.sockets.has(id)) {\n      return;\n    }\n    const userId = store.getState().user.data.id;\n\n    const wsTransport = new WSTransport(\n      `wss://ya-praktikum.tech/ws/chats/${userId}/${id}/${token}`,\n    );\n\n    this.sockets.set(id, wsTransport);\n\n    await wsTransport.connect();\n\n    this.subscribe(wsTransport, id);\n    this.fetchOldMessages(id);\n  }\n\n  sendMessage(id: number, message: string) {\n    const socket = this.sockets.get(id);\n    if (!socket) {\n      throw new Error(`Chat ${id} is not connected`);\n    }\n\n    socket.send({\n      type: 'message',\n      content: message,\n    });\n  }\n\n  fetchOldMessages(id: number) {\n    const socket = this.sockets.get(id);\n\n    if (!socket) {\n      throw new Error(`Chat ${id} is not connected`);\n    }\n\n    socket.send({ type: 'get old', content: '0' });\n  }\n\n  closeAll() {\n    Array.from(this.sockets.values()).forEach((socket) => socket.close());\n  }\n\n  private onMessage(id: number, messages: Message | Message[]) {\n    let type;\n    if (Array.isArray(messages)) {\n      type = 'messages';\n    } else {\n      type = messages.type;\n    }\n    const oldMessages = (store.getState().messages || {})[id] || [];\n    switch (type) {\n      case 'message': {\n        store.set(`messages.${id}`, [...oldMessages, messages]);\n        break;\n      }\n      case 'messages': {\n        store.set(`messages.${id}`, [\n          ...oldMessages,\n          ...(messages as Message[]),\n        ]);\n        break;\n      }\n    }\n  }\n\n  private onClose(id: number) {\n    this.sockets.delete(id);\n  }\n\n  private subscribe(transport: WSTransport, id: number) {\n    transport.on(WSTransportEvents.Message, (message) =>\n      this.onMessage(id, message),\n    );\n    transport.on(WSTransportEvents.Close, () => this.onClose(id));\n  }\n}\n\nconst controller = new MessagesController();\n\n// // @ts-ignore\n// window.messagesController = controller;\n\nexport default controller;\n","import API, { ChatsAPI } from '../api/ChatsAPI';\nimport store from '../store/store';\nimport MessagesController from './MessagesController';\nimport AuthController from './AuthController';\n\nclass ChatsController {\n  private readonly api: ChatsAPI;\n\n  constructor() {\n    this.api = API;\n  }\n\n  async create(title: string) {\n    try {\n      await this.api.create(title);\n\n      this.fetchChats();\n    } catch (e: any) {\n      store.set('user.error', e);\n    }\n  }\n\n  async fetchChats() {\n    try {\n      await AuthController.fetchUser();\n      const chats = await this.api.read();\n\n      chats.map(async (chat) => {\n        const token = await this.getToken(chat.id);\n\n        await MessagesController.connect(chat.id, token);\n      });\n\n      store.set('chats', chats);\n    } catch (e: any) {\n      store.set('user.error', e);\n    }\n  }\n\n  addUserToChat(id: number, userId: number) {\n    try {\n      this.api.addUsers(id, [userId]);\n    } catch (e: any) {\n      store.set('user.error', e);\n    }\n  }\n\n  async delete(id: number) {\n    try {\n      await this.api.delete(id);\n\n      this.fetchChats();\n    } catch (e: any) {\n      store.set('user.error', e);\n    }\n  }\n\n  getToken(id: number) {\n    try {\n      return this.api.getToken(id);\n    } catch (e: any) {\n      store.set('user.error', e);\n    }\n  }\n\n  selectChat(id: number) {\n    store.set('selectedChat', id);\n  }\n}\n\nexport default new ChatsController();\n","import { Block } from '../../../../utils/block/block';\nimport template from './sidebar.pug';\nimport { Link } from '../../../../components/links/link-mixin';\nimport { Input } from '../../../../components/inputs/input-mixin';\nimport { UserChats } from './user-chats/user-chats';\nimport store from '../../../../store/store';\nimport ChatsController from '../../../../controllers/ChatsController';\nimport AuthController from '../../../../controllers/AuthController';\nimport { withStore } from '../../../../hocs/withStore';\nimport { ChatInfo } from '../../../../api/ChatsAPI';\nimport { Button } from '../../../../components/buttons/button-mixin';\n\ninterface SidebarProps {\n  chats: ChatInfo[];\n}\nclass SidebarBase extends Block {\n  constructor(props: SidebarProps) {\n    super({ ...props });\n  }\n\n  init() {\n    ChatsController.fetchChats();\n    AuthController.fetchUser();\n    this.children.profileLink = new Link({\n      content: 'Профиль',\n      to: '/profile',\n      extraClass: 'sidebar__link',\n    });\n    this.children.addChat = new Button({\n      type: 'submit',\n      content: 'Создать чат',\n      btnClass: 'create-chat',\n      events: {\n        click: async () => {\n          await ChatsController.create('test chat');\n        },\n      },\n    });\n    this.children.chats = this.createChats(this.props);\n    this.children.addLink = new Input({\n      name: 'search',\n      type: 'text',\n      placeholder: 'Добавить пользователя по id',\n    });\n    this.children.addUserToChat = new Button({\n      type: 'submit',\n      content: 'Добавить',\n      events: {\n        click: async () => {\n          const input = this.children.addLink as Input;\n          const addUserId = input.getValue();\n          ChatsController.addUserToChat(\n            store.getState().selectedChat,\n            addUserId,\n          );\n          input.setValue('');\n        },\n      },\n    });\n  }\n  protected componentDidUpdate(\n    oldProps: SidebarProps,\n    newProps: SidebarProps,\n  ): boolean {\n    this.children.chats = this.createChats(newProps) as any;\n\n    return true;\n  }\n\n  private createChats(props: SidebarProps) {\n    return props.chats.map((data) => {\n      return new UserChats({\n        ...data,\n        events: {\n          click: () => {\n            ChatsController.selectChat(data.id);\n          },\n        },\n      });\n    });\n  }\n  render() {\n    return this.compile(template, this.props);\n  }\n}\n\nconst withChats = withStore((state) => ({ chats: [...(state.chats || [])] }));\n\nexport const Sidebar = withChats(SidebarBase);\n","main.main-chat\n    if selectedChat\n        header.main-chat__header\n            | !{header}\n            \n        main.main-chat__dialogs\n            | !{dialogs}\n\n        section.main-chat__bottom    \n            //- | !{input}\n            //- | !{sendLink}\n            section.main-chat-bottom__block\n                .main-chat-bottom__items\n                    .main-chat-bottom__message-panel\n                        .main-chat-bottom__message-panel_text \n                        | !{input}\n                    .main-chat-bottom__send-btn \n                        | !{sendLink}\n    else \n        .no-selected\n            p Выберите чат\n","div.main-chat-header__block\n    .main-chat-header__items\n        .main-chat-header__user-info\n            .main-chat-header__icon\n                img(src=`${img}` alt=\"avatar\" class=\"avatar-img\")\n            .main-chat-header__name=username\n        .main-chat-header__user-action-btn\n            .main-chat-header__user-action-dot\n            .main-chat-header__user-action-dot\n            .main-chat-header__user-action-dot\n","import { Block } from '../../../../../utils/block/block';\nimport template from './main-chat-header.pug';\n\ninterface MainChatHeaderProps {\n  username?: string;\n  img?: string;\n}\n\nexport class MainChatHeader extends Block {\n  constructor(props: MainChatHeaderProps) {\n    super(props);\n  }\n\n  render() {\n    return this.compile(template, this.props);\n  }\n}\n","if isMine\n    .message--mine=content\nelse\n    .message=content\n","import { Block } from '../../utils/block/block';\nimport template from './message.pug';\nimport './message.scss';\ninterface MessageProps {\n  content: string;\n  isMine: boolean;\n}\n\nexport class Message extends Block<MessageProps> {\n  constructor(props: MessageProps) {\n    super(props);\n  }\n\n  protected render(): DocumentFragment {\n    return this.compile(template, this.props);\n  }\n}\n","import { Block } from '../../../../utils/block/block';\nimport template from './main-chat.pug';\nimport { MainChatHeader } from './main-chat-header/main-chat-header';\nimport MessagesController, {\n  Message as MessageInfo,\n} from '../../../../controllers/MessagesController';\nimport AuthController from '../../../../controllers/AuthController';\nimport store from '../../../../store/store';\nimport { BaseLink } from '../../../../components/links/link-mixin';\nimport { Button } from '../../../../components/buttons/button-mixin';\nimport { Input } from '../../../../components/inputs/input-mixin';\nimport { validateBlock } from '../../../../utils/validator/validator';\nimport { withStore } from '../../../../hocs/withStore';\nimport { Message } from '../../../../components/messages/message';\n\ninterface MessengerProps {\n  selectedChat: number | undefined;\n  messages: MessageInfo[];\n  userId: number | undefined;\n}\nexport class MainChatBase extends Block {\n  constructor(props: MessengerProps) {\n    super(props);\n  }\n\n  init() {\n    AuthController.fetchUser();\n    this.children.header = new MainChatHeader({\n      username: store.getState().user.data.first_name,\n      img: !store.getState().user.data.avatar\n        ? ''\n        : `https://ya-praktikum.tech/api/v2/resources${\n            store.getState().user.data.avatar\n          }`,\n    });\n    this.children.dialogs = this.createMessages(this.props);\n    this.children.input = new Input({\n      name: 'message',\n      type: 'textarea',\n      placeholder: 'Сообщение',\n      events: {\n        focusout: (event: Event) => validateBlock(event),\n        focusin: (event: Event) => validateBlock(event),\n      },\n    });\n    this.children.attachLink = new BaseLink({});\n    this.children.sendLink = new Button({\n      content: 'Отправить',\n      events: {\n        click: () => {\n          const input = this.children.input as Input;\n          const message = input.getValue();\n          MessagesController.sendMessage(this.props.selectedChat!, message);\n          input.setValue('');\n        },\n      },\n    });\n  }\n  async componentDidMount() {\n    await AuthController.fetchUser();\n  }\n\n  protected componentDidUpdate(\n    oldProps: MessengerProps,\n    newProps: MessengerProps,\n  ): boolean {\n    this.children.dialogs = this.createMessages(newProps);\n\n    return true;\n  }\n  private createMessages(props: MessengerProps) {\n    return props.messages.map((data) => {\n      return new Message({ ...data, isMine: props.userId === data.user_id });\n    });\n  }\n  render() {\n    return this.compile(template, this.props);\n  }\n}\nconst withSelectedChatMessages = withStore((state) => {\n  const selectedChatId = state.selectedChat;\n  if (!selectedChatId) {\n    return {\n      messages: [],\n      selectedChat: undefined,\n      userId: state.user.data.id || 0,\n    };\n  }\n\n  return {\n    messages: (state.messages || {})[selectedChatId] || [],\n    selectedChat: state.selectedChat,\n    userId: state?.user.data.id || 0,\n  };\n});\n\nexport const MainChat = withSelectedChatMessages(MainChatBase);\n","div.chat\n    | !{sidebar}\n    | !{mainChat}\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"7cSvV\")).toString();","import { Block } from '../../utils/block/block';\nimport { Sidebar } from '../../modules/chat/components/sidebar/sidebar';\nimport { MainChat } from '../../modules/chat/components/main-chat/main-chat';\nimport template from './chat.pug';\nimport lensIcon from '../../assets/icons/lens-icon.svg';\nimport ChatsController from '../../controllers/ChatsController';\nimport AuthController from '../../controllers/AuthController';\nimport './chat.scss';\n\ninterface ChatProps {\n  title: string;\n}\n\nexport class Chat extends Block {\n  constructor(props: ChatProps) {\n    super(props);\n  }\n\n  init() {\n    ChatsController.fetchChats();\n    AuthController.fetchUser();\n    this.children.sidebar = new Sidebar({\n      title: 'Профиль',\n      img: lensIcon as string,\n    });\n    this.children.mainChat = new MainChat({});\n    ChatsController.fetchChats().finally(() => {\n      (this.children.sidebar as Block).setProps({});\n    });\n  }\n\n  render() {\n    return this.compile(template, this.props);\n  }\n}\n",".profile-card__field\n    span.profile-card__field__title= label \n    if is_input \n        input(type=`${type}` name=name class=`input__field profile-card__field__body` value=`${body || ''}` required autofocus)\n        label(class=`error error-${name}`)=error || ''\n    else\n        span.profile-card__field__body= body \n","import { Block } from '../../../utils/block/block';\nimport template from './profile-input-mixin.pug';\nimport './profile-input-mixin.scss';\n\ninterface ProfileCardInputProps {\n  name: string;\n  body: string;\n  label: string;\n  is_input?: boolean;\n  placeholder?: string;\n  type: string;\n  error?: string;\n  events?: {\n    focusin: () => void;\n    focusout: () => void;\n  };\n}\n\nexport class ProfileCardInput extends Block {\n  constructor(props: ProfileCardInputProps) {\n    super(props);\n  }\n\n  render() {\n    return this.compile(template, this.props);\n  }\n}\n","import BaseAPI from './BaseAPI';\nexport interface PasswordData {\n  oldPassword: string;\n  newPassword: string;\n}\n\nexport interface SignupData {\n  first_name: string;\n  second_name: string;\n  login: string;\n  email: string;\n  password: string;\n  phone: string;\n}\n\nexport interface User {\n  id: number;\n  first_name: string;\n  second_name: string;\n  login: string;\n  email: string;\n  password: string;\n  phone: string;\n  avatar: string;\n}\nexport class UserAPI extends BaseAPI {\n  constructor() {\n    super('/user');\n  }\n\n  update(data: SigninData) {\n    return this.http.put('/profile', data);\n  }\n\n  password(data: PasswordData) {\n    return this.http.put('/password', data);\n  }\n\n  avatar(data: any) {\n    return this.http.put('/profile/avatar', data);\n  }\n\n  getUser(id: number): Promise<Array<User & { role: string }>> {\n    return this.http.get(`/${id}`);\n  }\n}\n\nexport default new UserAPI();\n","import API, { UserAPI, SigninData, PasswordData } from '../api/UserAPI';\nimport store from '../store/store';\nimport AuthController from './AuthController';\nimport router from '../router/router';\n\nexport class UserController {\n  private readonly api: UserAPI;\n\n  constructor() {\n    this.api = API;\n  }\n\n  async profile(data: SigninData) {\n    try {\n      await AuthController.fetchUser();\n      store.set('user.error', null);\n      await this.api.update(data);\n      router.go('/profile');\n    } catch (e: any) {\n      store.set('user.error', e);\n    }\n  }\n  async password(data: PasswordData) {\n    try {\n      store.set('user.error', null);\n      await this.api.password(data);\n      await AuthController.fetchUser();\n      router.go('/profile');\n    } catch (e: any) {\n      store.set('user.error', e);\n    }\n  }\n  async avatar(data: FormData) {\n    try {\n      await this.api.avatar(data);\n      await AuthController.fetchUser();\n    } catch (e: any) {\n      console.error(e.message);\n    }\n  }\n}\n\nexport default new UserController();\n","<form id=\"profile-avatar\">\n  img(src=`${img}` alt=\"avatar\" class=\"avatar-img\")\n  .avatar-overlay\n    .avatar-overlay__text\n    .image-container\n      <input id=\"avatar\" type=\"file\" name=\"avatar\" accept=\"image/*\">\n</form> \n\n","import { Block } from '../../utils/block/block';\nimport template from './avatar.pug';\nimport './avatar.scss';\n\ninterface AvatarProps {\n  img?: string;\n  events?: {\n    change: () => void;\n  };\n}\n\nexport class Avatar extends Block<AvatarProps> {\n  constructor(props: AvatarProps) {\n    super(props);\n  }\n\n  render() {\n    return this.compile(template, this.props);\n  }\n}\n",".profile-layout\n    section.profile-layout__sidebar\n        a(href='/messanger').profile-layout__sidebar-btn\n                p Назад\n    section.profile-layout__main\n        .profile-card\n            .profile-card__user-info\n                | !{avatar}\n            .profile-card__block\n                .profile-card__fields \n                    | !{email}\n                    | !{login}\n                    | !{firstName}\n                    | !{secondName}\n                    | !{displayName}\n                    | !{phone}\n                .profile-card__actions\n                    .profile-card__field\n                        | !{updateInfoLink}\n                    .profile-card__field\n                        | !{updatePasswordLink}\n                    .profile-card__field    \n                        | !{exitLink}\n","import { Block } from '../../utils/block/block';\nimport { ProfileCardInput } from '../inputs/profile-inputs/profile-input-mixin';\nimport { Link } from '../links/link-mixin';\nimport AuthController from '../../controllers/AuthController';\nimport UserController from '../../controllers/UserController';\nimport { Avatar } from '../avatar/avatar';\nimport store from '../../store/store';\nimport { Button } from '../buttons/button-mixin';\nimport { withStore } from '../../hocs/withStore';\nimport template from './profile-card-mixin.pug';\nimport './profile-card-mixin.scss';\n\ninterface ProfileCardProps {\n  userInfoName: string;\n  img: string;\n}\nexport class ProfileCard extends Block {\n  constructor(props: ProfileCardProps) {\n    super(props);\n  }\n\n  init() {\n    this.children.avatar = new Avatar({\n      img: !this.props.avatar\n        ? ''\n        : `https://ya-praktikum.tech/api/v2/resources${\n            store.getState().user.data.avatar\n          }`,\n      events: {\n        change: (e: any) => {\n          e.preventDefault();\n          const formData = new FormData();\n          const input: any = document.querySelector('#avatar');\n          formData.append('avatar', input?.files[0]);\n          UserController.avatar(formData);\n        },\n      },\n    });\n    this.children.email = new ProfileCardInput({\n      name: 'email',\n      type: 'text',\n      label: 'Почта',\n      body: store.getState().user.data.email,\n    });\n    this.children.login = new ProfileCardInput({\n      name: 'login',\n      type: 'text',\n      label: 'Логин',\n      body: store.getState().user.data.login,\n    });\n    this.children.firstName = new ProfileCardInput({\n      name: 'first_name',\n      type: 'text',\n      label: 'Имя',\n      body: store.getState().user.data.first_name,\n    });\n    this.children.secondName = new ProfileCardInput({\n      name: 'second_name',\n      type: 'text',\n      label: 'Фамилия',\n      body: store.getState().user.data.second_name,\n    });\n    this.children.displayName = new ProfileCardInput({\n      name: 'display_name',\n      type: 'text',\n      label: 'Имя в чате',\n      body: store.getState().user.data.display_name,\n    });\n    this.children.phone = new ProfileCardInput({\n      name: 'phone',\n      type: 'text',\n      label: 'Телефон',\n      body: store.getState().user.data.phone,\n    });\n\n    this.children.updateInfoLink = new Link({\n      content: 'Изменить данные',\n      to: '/settings',\n      extraClass: 'profile__link',\n    });\n    this.children.updatePasswordLink = new Link({\n      content: 'Изменить пароль',\n      to: '/change-password',\n      extraClass: 'profile__link',\n    });\n    this.children.exitLink = new Button({\n      content: 'Выйти',\n      events: {\n        click: () => {\n          AuthController.logout();\n        },\n      },\n      btnClass: 'profile__link_exit',\n    });\n  }\n\n  protected componentDidUpdate(oldProps: any, newProps: any): boolean {\n    (this.children.avatar as Avatar).setProps({\n      img:\n        newProps.avatar === null\n          ? ''\n          : `https://ya-praktikum.tech/api/v2/resources${\n              store.getState().user.data.avatar\n            }`,\n    });\n  }\n  render() {\n    return this.compile(template, this.props);\n  }\n}\n\nconst withUser = withStore((store) => ({ ...store.user }));\n\nexport const ProfilePage = withUser(ProfileCard);\n",".profile-layout\n    section.profile-layout__sidebar\n        a(href='/messanger').profile-layout__sidebar-btn\n                p Назад\n    section.profile-layout__main\n        .profile-card\n            form(class='profile-card__block' action='../../chat/chat.html')\n                .profile-card__fields \n                    | !{email}\n                    | !{login}\n                    | !{firstName}\n                    | !{secondName}\n                    | !{displayName}\n                    | !{phone}\n                .profile-card__actions\n                    .profile-card__actions-btn\n                        | !{button}\n","import { Block } from '../../../utils/block/block';\nimport { ProfileCardInput } from '../../../components/inputs/profile-inputs/profile-input-mixin';\nimport { Button } from '../../../components/buttons/button-mixin';\nimport { validateBlock } from '../../../utils/validator/validator';\nimport { serializer } from '../../../utils/serializer/serializer';\nimport template from './profile-update-info.pug';\nimport '../../../components/profile-card/profile-card-mixin.scss';\nimport './profile-update-info.scss';\nimport store from '../../../store/store';\nimport UserController from '../../../controllers/UserController';\n\nexport class ProfileUpdateInfo extends Block {\n  constructor() {\n    super({});\n  }\n\n  init() {\n    this.children.email = new ProfileCardInput({\n      name: 'email',\n      type: 'text',\n      label: 'Почта',\n      body: store.getState().user.data.email,\n      is_input: true,\n      error: 'Неверный формат',\n      events: {\n        focusout: (event: Event) => validateBlock(event),\n        focusin: (event: Event) => validateBlock(event),\n      },\n    });\n    this.children.login = new ProfileCardInput({\n      name: 'login',\n      type: 'text',\n      label: 'Логин',\n      body: store.getState().user.data.login,\n      is_input: true,\n      error: 'Недостаточное количество символов или неверный формат',\n      events: {\n        focusout: (event: Event) => validateBlock(event),\n        focusin: (event: Event) => validateBlock(event),\n      },\n    });\n    this.children.firstName = new ProfileCardInput({\n      name: 'first_name',\n      type: 'text',\n      label: 'Имя',\n      body: store.getState().user.data.first_name,\n      is_input: true,\n      error: 'Недостаточное количество символов или неверный формат',\n      events: {\n        focusout: (event: Event) => validateBlock(event),\n        focusin: (event: Event) => validateBlock(event),\n      },\n    });\n    this.children.secondName = new ProfileCardInput({\n      name: 'second_name',\n      type: 'text',\n      label: 'Фамилия',\n      body: store.getState().user.data.second_name,\n      error: 'Недостаточное количество символов или неверный формат',\n      is_input: true,\n      events: {\n        focusout: (event: Event) => validateBlock(event),\n        focusin: (event: Event) => validateBlock(event),\n      },\n    });\n    this.children.displayName = new ProfileCardInput({\n      name: 'display_name',\n      type: 'text',\n      label: 'Имя в чате',\n      body: store.getState().user.data.display_name,\n      is_input: true,\n      error: 'Недостаточное количество символов или неверный формат',\n      events: {\n        focusout: (event: Event) => validateBlock(event),\n        focusin: (event: Event) => validateBlock(event),\n      },\n    });\n    this.children.phone = new ProfileCardInput({\n      name: 'phone',\n      type: 'text',\n      label: 'Телефон',\n      body: store.getState().user.data.phone,\n      error: 'Недостаточное количество символов или неверный формат',\n      is_input: true,\n      events: {\n        focusout: (event: Event) => validateBlock(event),\n        focusin: (event: Event) => validateBlock(event),\n      },\n    });\n    this.children.button = new Button({\n      type: 'submit',\n      btnClass: 'save-changes',\n      content: 'Сохранить',\n      events: {\n        click: (e) => this.onSubmit(e),\n      },\n    });\n  }\n\n  onSubmit(e) {\n    const fields = [\n      'email',\n      'login',\n      'first_name',\n      'second_name',\n      'phone',\n      'display_name',\n    ];\n    let dataForm = {};\n    dataForm = serializer(e, fields);\n    UserController.profile(dataForm);\n  }\n\n  render() {\n    return this.compile(template, this.props);\n  }\n}\n",".profile-layout\n    section.profile-layout__sidebar\n        a(href='/messanger').profile-layout__sidebar-btn\n                p Назад\n    section.profile-layout__main\n        .profile-card\n            form(class='profile-card__block' action='../../chat/chat.html')\n                .profile-card__fields \n                    | !{oldPassword}\n                    | !{newPassword}\n                    | !{repeatPassword}\n                .profile-card__actions\n                    .profile-card__actions-btn\n                        | !{button}\n\n","import { Block } from '../../../utils/block/block';\nimport { ProfileCardInput } from '../../../components/inputs/profile-inputs/profile-input-mixin';\nimport { Button } from '../../../components/buttons/button-mixin';\nimport { validateBlock } from '../../../utils/validator/validator';\nimport { serializer } from '../../../utils/serializer/serializer';\nimport UserController from '../../../controllers/UserController';\nimport template from './profile-update-password.pug';\nimport '../../../components/profile-card/profile-card-mixin.scss';\nimport './profile-update-password.scss';\n\nexport class ProfileUpdatePassword extends Block {\n  constructor() {\n    super({});\n  }\n  init() {\n    this.children.oldPassword = new ProfileCardInput({\n      name: 'oldPassword',\n      type: 'password',\n      label: 'Старый пароль',\n      error: 'Неверный паорль',\n      is_input: true,\n      events: {\n        focusout: (event: Event) => validateBlock(event),\n        focusin: (event: Event) => validateBlock(event),\n      },\n    });\n    this.children.newPassword = new ProfileCardInput({\n      name: 'newPassword',\n      type: 'password',\n      error: 'Недостаточное количество символов',\n      label: 'Новый пароль',\n      is_input: true,\n      events: {\n        focusout: (event: Event) => validateBlock(event),\n        focusin: (event: Event) => validateBlock(event),\n      },\n    });\n    this.children.repeatPassword = new ProfileCardInput({\n      name: 'repeatPassword',\n      type: 'password',\n      label: 'Повтороите новый пароль',\n      error: 'Пароли не совпадают',\n      is_input: true,\n      events: {\n        focusout: (event: Event) => validateBlock(event),\n        focusin: (event: Event) => validateBlock(event),\n      },\n    });\n    this.children.button = new Button({\n      type: 'submit',\n      btnClass: 'save-changes-password',\n      content: 'Сохранить',\n      events: {\n        click: (e) => this.onSubmit(e),\n      },\n    });\n  }\n\n  onSubmit(e) {\n    const fields = ['oldPassword', 'newPassword'];\n    serializer(e, fields);\n    let dataForm = {};\n    dataForm = serializer(e, fields);\n    UserController.password(dataForm);\n  }\n\n  render() {\n    return this.compile(template, this.props);\n  }\n}\n","import { Page404 } from './views/404/404';\nimport { Page500 } from './views/500/500';\nimport { SignIn } from './views/auth/signIn/signIn';\nimport { SignUp } from './views/auth/signUp/signUp';\nimport { Chat } from './views/chat/chat';\nimport { Profile } from './views/profile/profile';\nimport { ProfilePage } from './components/profile-card/profile-card-mixin';\nimport { ProfileUpdateInfo } from './views/profile/profile-update-info/profile-update-info';\nimport { ProfileUpdatePassword } from './views/profile/profile-update-password/profile-update-password';\nimport './controllers/MessagesController';\nimport AuthController from './controllers/AuthController';\nimport Router from './router/router';\nenum Routes {\n  Index = '/',\n  SignUp = '/signup',\n  Chat = '/messanger',\n  Profile = '/profile',\n  Settings = '/settings',\n  ChangePassword = '/change-password',\n  Page404 = '/404',\n  Page500 = '/500',\n}\nwindow.addEventListener('DOMContentLoaded', async () => {\n  Router.use(Routes.Index, SignIn)\n    .use(Routes.SignUp, SignUp)\n    .use(Routes.Chat, Chat)\n    .use(Routes.Profile, ProfilePage)\n    .use(Routes.Settings, ProfileUpdateInfo)\n    .use(Routes.ChangePassword, ProfileUpdatePassword)\n    .use(Routes.Page404, Page404)\n    .use(Routes.Page500, Page500);\n  debugger;\n  let isProtectedRoute = true;\n\n  switch (window.location.pathname) {\n    case Routes.Index:\n      break;\n    case Routes.SignUp:\n      isProtectedRoute = false;\n      break;\n  }\n\n  try {\n    await AuthController.fetchUser();\n\n    Router.start();\n\n    if (!isProtectedRoute) {\n      Router.go(Routes.Chat);\n    }\n  } catch (e) {\n    Router.start();\n\n    if (isProtectedRoute) {\n      Router.go(Routes.Index);\n    }\n  }\n});\n"],"names":["$18c11f3350a906ea$export$6503ec6e8aabbaf","$18c11f3350a906ea$export$f7ad0328861e2f03","$18c11f3350a906ea$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$444c847613b04231$export$5087227eb54526","constructor","this","listeners","on","event","handler","push","off","Event","filter","listener","emit","args","forEach","$7ffc1f94643dc7e4$export$2e2bcd8739ae039","crypto","randomUUID","bind","$568f4ee4022ba00e$var$getRandomValues","$568f4ee4022ba00e$var$rnds8","Uint8Array","$568f4ee4022ba00e$export$2e2bcd8739ae039","getRandomValues","$1d0137947e8554ce$var$byteToHex","toString","slice","$1d0137947e8554ce$export$8fb373d660548968","arr","offset","toLowerCase","$3fa3ae484854b431$export$2e2bcd8739ae039","options","buf","rnds","random","rng","$862b8c49eff4fbfb$export$d96a8827a60d6b69","static","INIT","FLOW_CDM","FLOW_CDU","FLOW_RENDER","_element","propsWithChildren","eventBus","props","children","_getChildrenAndProps","_makePropsProxy","_registerEvents","EVENTS","childrenAndProps","entries","key","value","Array","isArray","every","v","_addEvents","events","eventName","addEventListener","_init","_componentDidMount","_componentDidUpdate","_render","init","componentDidMount","dispatchComponentDidMount","values","child","ch","oldProps","newProps","componentDidUpdate","setProps","nextProps","assign","element","newElement","render","firstElementChild","replaceWith","compile","template","context","contextAndStubs","name","component","map","html","temp","document","createElement","innerHTML","replaceStub","stub","content","querySelector","getContent","append","from","childNodes","_","DocumentFragment","self","Proxy","get","target","prop","set","oldTarget","deleteProperty","$7d1b903f19e06989$var$pug_attr","t","e","n","r","f","toJSON","stringify","indexOf","$7d1b903f19e06989$var$pug_escape","replace","$7d1b903f19e06989$var$pug_classes","s","a","u","c","g","$7d1b903f19e06989$var$pug_classes_array","o","$7d1b903f19e06989$var$pug_has_own_property","call","$7d1b903f19e06989$var$pug_classes_object","$7d1b903f19e06989$var$pug_match_html","exec","index","charCodeAt","substring","prototype","hasOwnProperty","$7d1b903f19e06989$export$2e2bcd8739ae039","locals","pug_interp","pug_html","locals_for_with","content1","extraClass1","href1","undefined","extraClass","href","$2dd052b6ca3ce78f$export$248d38f6296296c5","newPath","oldPath","$e5a360e2f830dad9$export$e7b0ac011bb776c6","pathname","view","_pathname","_blockClass","_block","_props","navigate","match","leave","query","block","root","$e5a360e2f830dad9$var$render","$079405fbcce1930f$var$Router","rootQuery","_routes","_currentRoute","_history","window","history","__instance","use","route","start","onpopstate","currentTarget","_onRoute","location","getRoute","errorPage","$31102413908fced0$export$3cb69218ff952ef8","console","log","go","pushState","back","forward","find","$079405fbcce1930f$export$2e2bcd8739ae039","$820cb896cad5c6fd$export$6a1c473d3b5783c1","super","click","router","to","$820cb896cad5c6fd$export$a6c7ac8248d6e38a","Component","$b1f1eacb0d80e564$var$pug_escape","$b1f1eacb0d80e564$var$pug_match_html","$b1f1eacb0d80e564$export$2e2bcd8739ae039","link1","link","$082bcf9d1bd57bab$export$fd3f669c2104219d","$a82efcd4860cad0b$var$pug_attr","$a82efcd4860cad0b$var$pug_escape","$a82efcd4860cad0b$var$pug_classes","$a82efcd4860cad0b$var$pug_classes_array","$a82efcd4860cad0b$var$pug_has_own_property","$a82efcd4860cad0b$var$pug_classes_object","$a82efcd4860cad0b$var$pug_match_html","$a82efcd4860cad0b$export$2e2bcd8739ae039","btnClass1","type1","btnClass","type","$8284d95eb64a131e$export$353f5b6fc5456de1","$523d0bf12ca752ff$var$pug_attr","$523d0bf12ca752ff$var$pug_escape","$523d0bf12ca752ff$var$pug_classes","$523d0bf12ca752ff$var$pug_classes_array","$523d0bf12ca752ff$var$pug_has_own_property","$523d0bf12ca752ff$var$pug_classes_object","$523d0bf12ca752ff$var$pug_match_html","$523d0bf12ca752ff$export$2e2bcd8739ae039","error1","label1","name1","placeholder1","error","label","placeholder","$ad8da2d3fbbdf30b$export$f5b8910cec6cf069","setValue","getName","getValue","$7ba3f7962c10418b$export$a2f68fcea13aaad3","FieldName","$7ba3f7962c10418b$export$a22775fa5e2eebd9","Login","isTextLoginValid","test","Password","RepeatPassword","OldPassword","NewPassword","isValidText","isValidLength","FirstName","SecondName","Email","Phone","Message","$7ba3f7962c10418b$export$8a53803420cdc9be","classList","add","getElementsByClassName","style","display","remove","$2b8a05cd0af6bb27$export$632f83ecc6592643","fields","preventDefault","formData","isFormValid","field","el","getElementsByName","getAttribute","$48fe10ac26138a25$export$31bb55db0b3e4187","Method","$48fe10ac26138a25$export$2e2bcd8739ae039","endpoint","API_URL","path","request","post","data","method","POST","put","PUT","patch","PATCH","delete","DELETE","url","optinos","GET","Promise","resolve","reject","xhr","XMLHttpRequest","open","onload","response","onabort","reason","onerror","ontimeout","FormData","setRequestHeader","withCredentials","responseType","send","$09d6ddfa0757c9c4$export$2e2bcd8739ae039","http","$c31cbb6802989ee5$export$2e2bcd8739ae039","signin","signup","read","logout","$e632a424d5084b37$export$4950aa0f605343fb","lhs","rhs","p","$e632a424d5084b37$export$adaa4cf7ef1b65be","object","split","reduceRight","acc","$01ad0b73f9df3fa4$export$84bc128a772952e2","$01ad0b73f9df3fa4$export$2e2bcd8739ae039","state","keypath","Updated","getState","$a1e27524820deb03$export$2e2bcd8739ae039","api","async","fetchUser","user","$f10f3d5025b00830$var$pug_match_html","$f10f3d5025b00830$export$2e2bcd8739ae039","button1","login1","password1","title1","$f10f3d5025b00830$var$pug_escape","button","login","password","title","$02ef4a1c2513b60c$export$b64708c6f1b3ed96","focusout","focusin","onSubmit","dataForm","$e5b73cf8b6b952f9$var$pug_match_html","$e5b73cf8b6b952f9$export$2e2bcd8739ae039","email1","firstName1","phone1","repeatPassword1","secondName1","$e5b73cf8b6b952f9$var$pug_escape","email","firstName","phone","repeatPassword","secondName","$93513c62cdf506e5$export$4ee457d816cea81a","$eba88b12ff78ee5b$var$pug_escape","$eba88b12ff78ee5b$var$pug_match_html","$eba88b12ff78ee5b$export$2e2bcd8739ae039","addChat1","addLink1","addUserToChat1","chats1","img1","profileLink1","search1","searchLink1","$eba88b12ff78ee5b$var$pug_attr","addChat","addLink","addUserToChat","chats","img","profileLink","search","searchLink","$f614d2144050ae6c$var$pug_escape","$f614d2144050ae6c$var$pug_match_html","$f614d2144050ae6c$export$2e2bcd8739ae039","id1","last_message1","first_name","last_message","$d24236f5b70f64bf$export$c605750379d8bc00","mapStateToProps","previousState","stateProps","$ef99038472366065$export$99ccc443e79280ca","selectedChat","$ef99038472366065$export$ff7ab3323c48d470","$ca7b1ea77746ec79$export$2e2bcd8739ae039","create","chatId","getUsers","addUsers","users","token","$8a42fff013a0ace4$export$38754c5cda73b9e9","WSTransportEvents","$8a42fff013a0ace4$export$2e2bcd8739ae039","socket","pingInterval","connect","WebSocket","subscribe","setupPing","Connected","close","setInterval","Close","clearInterval","message","$5537e7ac8154719e$export$2e2bcd8739ae039","sockets","Map","has","userId","wsTransport","fetchOldMessages","sendMessage","closeAll","onMessage","messages","oldMessages","onClose","transport","$8083fdcb7fd99b69$export$2e2bcd8739ae039","fetchChats","chat","getToken","selectChat","$e05816de30eee04f$export$1ba59dacbcbf90fe","$e05816de30eee04f$var$withChats","createChats","input","addUserId","$804b3aaf08c0216a$export$2e2bcd8739ae039","dialogs1","header1","input1","selectedChat1","sendLink1","dialogs","header","sendLink","$d81f7add71162259$var$pug_escape","$d81f7add71162259$var$pug_match_html","$d81f7add71162259$export$2e2bcd8739ae039","username1","$d81f7add71162259$var$pug_attr","username","$d5b61a689747eb3f$export$4ccd140975f449b9","$2336678e7c0267eb$var$pug_escape","$2336678e7c0267eb$var$pug_match_html","$2336678e7c0267eb$export$2e2bcd8739ae039","isMine1","isMine","$6d6e1ff69418822a$export$f69c19e57285b83a","$39858523c4510666$export$a6daee02b720bdbc","selectedChatId","$39858523c4510666$var$withSelectedChatMessages","avatar","createMessages","attachLink","user_id","$3a610fcc122c171c$export$2e2bcd8739ae039","mainChat1","sidebar1","mainChat","sidebar","$7240f600eab820f6$exports","URL","import","meta","$ac28478e00d17134$export$d49dffca20dba6f7","$parcel$interopDefault","finally","$321af04b79f65b1e$var$pug_attr","$321af04b79f65b1e$var$pug_escape","$321af04b79f65b1e$var$pug_classes","$321af04b79f65b1e$var$pug_classes_array","$321af04b79f65b1e$var$pug_has_own_property","$321af04b79f65b1e$var$pug_classes_object","$321af04b79f65b1e$var$pug_match_html","$321af04b79f65b1e$export$2e2bcd8739ae039","body1","is_input1","body","is_input","$c592b286eb33daac$export$14179404d2034a6c","$62bb3252986a3fe2$export$2e2bcd8739ae039","update","getUser","$d57bcdad5c16c448$export$2e2bcd8739ae039","$fc9747dcb2063f15$var$pug_attr","$fc9747dcb2063f15$var$pug_match_html","$fc9747dcb2063f15$var$pug_escape","$fc9747dcb2063f15$export$2e2bcd8739ae039","$a049215799581b61$export$e2255cf6045e8d47","$5b096cbfd3dba64f$export$2e2bcd8739ae039","avatar1","displayName1","exitLink1","updateInfoLink1","updatePasswordLink1","displayName","exitLink","updateInfoLink","updatePasswordLink","$87a99795626ceebb$export$bed540ccfa8743c4","change","files","second_name","display_name","$87a99795626ceebb$export$120c0e7b1bef3ec7","store","$87a99795626ceebb$var$withUser","$5a95229216984222$export$2e2bcd8739ae039","$06fb6a6d714c3f94$export$b2a541c15b345e5f","profile","$6fcde6eb2e71d600$export$2e2bcd8739ae039","newPassword1","oldPassword1","newPassword","oldPassword","$8bc5ff36e5ce2284$export$a34a940d10e6adec","$b4e14b6b8da86996$var$Routes","Routes","Index","SignUp","Chat","Profile","Settings","ChangePassword","Page404","Page500","isProtectedRoute"],"version":3,"file":"index.08b237b0.js.map"}